<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<title>GEPS Documentation</title>
<table style="text-align: left; height: 28px; width: 710px;" border="0" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="width: 360px;" align="center" valign="middle"><img style="width: 300px; height: 82px;" alt="GainSpan" src="GainSpan_logo_hi-res.jpg"><br><span style="font-family: Verdana; font-style: italic;">Gainspan Embedded Platform Software</span></td>
<td style="width: 202px;" align="center" valign="middle"></td>
<td style="width: 120px;" align="center" valign="middle"><br></td>
</tr>
</tbody>
</table>
<br>
</head>

<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Groups</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('a00672.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GSN Simple Network Time Protocol</div>  </div>
<div class="ingroups"><a class="el" href="a00685.html">Modules</a></div></div>
<div class="contents">

<p>SNTP functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00227.html">GSN_SNTP_CTX</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">SNTP context structure. This structure contains the parameters that define an instance of the SNTP object.  <a href="a00227.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="a00227.html">GSN_SNTP_CTX</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00672.html#gae0179c63a9e6988c361e8d0deb285a24">GSN_SNTP_CTX_T</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">SNTP context structure. This structure contains the parameters that define an instance of the SNTP object.  <a href="#gae0179c63a9e6988c361e8d0deb285a24"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">PUBLIC <a class="el" href="a00660.html#gada5951904ac6110b1fa95e51a9ddc217">GSN_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00672.html#ga71cfb857bfbf8d5de080ef4f5807b0d0">GsnSntp_TimeSync</a> (<a class="el" href="a00227.html">GSN_SNTP_CTX_T</a> *sntpCtx, <a class="el" href="a00660.html#gae1e6edbbc26d6fbc71a90190d0266018">UINT32</a> serverIpAddr, <a class="el" href="a00660.html#gae1e6edbbc26d6fbc71a90190d0266018">UINT32</a> serverTimeout, <a class="el" href="a00481.html#aac7371fae4e423f90332caf551b62cf1">GSN_NOTIFICATION_FUNC_T</a> cb, VOID *cbCtx)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize time with server.  <a href="#ga71cfb857bfbf8d5de080ef4f5807b0d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">PUBLIC INLINE VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00672.html#ga0e7313023463ed1799f84c4b49ad4f91">GsnSntp_TimeDiffGet</a> (<a class="el" href="a00227.html">GSN_SNTP_CTX_T</a> *sntpCtx, <a class="el" href="a00660.html#ga28961430434ccabca6862ea93fe9a15b">ULONG64</a> *pTimeDiff, <a class="el" href="a00660.html#ga1f04022c0a182c51c059438790ea138c">BOOL</a> *pDiffNegative)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get adjustment time value.  <a href="#ga0e7313023463ed1799f84c4b49ad4f91"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>SNTP functions. </p>
<p>This file contains public definitions and functions for synchronizing TSync time with a specified SNTP server. <br/>
</p>
<p><br/>
 The TSync block, low- and high-power clocks, and associated platform software provide a clock that can be synchronized to an external reference by adjusting the offset value, and will thereafter maintain synchronization despite sojourns in power-conserving states. In order to have System Time accurately reflect absolute calendar time, it is merely necessary to add a means of establishing the value of the offset. GEPS versions 2.0 and above support the use of SNTP for this purpose. The API function <a class="el" href="a00672.html#ga71cfb857bfbf8d5de080ef4f5807b0d0" title="Synchronize time with server.">GsnSntp_TimeSync()</a> sends a Time Request to a known server address (using the function GsnSntp_Send()), and registers a callback function to handle the Time Response when it is received. The callback function (<a class="el" href="a00585.html#a899703a2f77e7e303de46351018c09e8">GsnSntp_SocketCb()</a>) extracts the difference between the SNTP time and the System Time, and corrects System Time for this difference. The calling application may also pass in its own callback function, to be launched once the time difference has been established. <br/>
 <br/>
 In setting System Time, the calling application must take into account other activities that may depend on the absolute value of System Time. For example, any soft timers that are active will be affected by a Sys-tem Time offset; if the timers are intended to mark relative rather than absolute times, their values must be reset. Other relative times, such as the duration of a DHCP lease, may also need to be adjusted. The User Application must attend to these issues if it adjusts System Time as a consequence of an SNTP synchronization. </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gae0179c63a9e6988c361e8d0deb285a24"></a><!-- doxytag: member="gsn_sntp.h::GSN_SNTP_CTX_T" ref="gae0179c63a9e6988c361e8d0deb285a24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="a00227.html">GSN_SNTP_CTX</a>  <a class="el" href="a00227.html">GSN_SNTP_CTX_T</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>SNTP context structure. This structure contains the parameters that define an instance of the SNTP object. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0e7313023463ed1799f84c4b49ad4f91"></a><!-- doxytag: member="gsn_sntp.h::GsnSntp_TimeDiffGet" ref="ga0e7313023463ed1799f84c4b49ad4f91" args="(GSN_SNTP_CTX_T *sntpCtx, ULONG64 *pTimeDiff, BOOL *pDiffNegative)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PUBLIC INLINE VOID GsnSntp_TimeDiffGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00227.html">GSN_SNTP_CTX_T</a> *&#160;</td>
          <td class="paramname"><em>sntpCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ga28961430434ccabca6862ea93fe9a15b">ULONG64</a> *&#160;</td>
          <td class="paramname"><em>pTimeDiff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ga1f04022c0a182c51c059438790ea138c">BOOL</a> *&#160;</td>
          <td class="paramname"><em>pDiffNegative</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get adjustment time value. </p>
<p>This function gives the time adjustment value and whether the adjustment is negative or positive. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sntpCtx</td><td>- IN Pointer to SNTP context provided by user. </td></tr>
    <tr><td class="paramname">pTimeDiff</td><td>- OUT Pointer to time difference value. </td></tr>
    <tr><td class="paramname">pDiffNegative</td><td>- OUT Pointer to a BOOL for returning the adjustment type, positive or negative. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00585_source.html#l00185">185</a> of file <a class="el" href="a00585_source.html">gsn_sntp.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga71cfb857bfbf8d5de080ef4f5807b0d0"></a><!-- doxytag: member="gsn_sntp.h::GsnSntp_TimeSync" ref="ga71cfb857bfbf8d5de080ef4f5807b0d0" args="(GSN_SNTP_CTX_T *sntpCtx, UINT32 serverIpAddr, UINT32 serverTimeout, GSN_NOTIFICATION_FUNC_T cb, VOID *cbCtx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PUBLIC <a class="el" href="a00660.html#gada5951904ac6110b1fa95e51a9ddc217">GSN_STATUS</a> GsnSntp_TimeSync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00227.html">GSN_SNTP_CTX_T</a> *&#160;</td>
          <td class="paramname"><em>sntpCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#gae1e6edbbc26d6fbc71a90190d0266018">UINT32</a>&#160;</td>
          <td class="paramname"><em>serverIpAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#gae1e6edbbc26d6fbc71a90190d0266018">UINT32</a>&#160;</td>
          <td class="paramname"><em>serverTimeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00481.html#aac7371fae4e423f90332caf551b62cf1">GSN_NOTIFICATION_FUNC_T</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VOID *&#160;</td>
          <td class="paramname"><em>cbCtx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Synchronize time with server. </p>
<p>This function performs time synchronization with the given SNTP server. It does not adjust the system time but just gets the server time and computes the time difference. It is up to application to adjust the time after the successful callback. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sntpCtx</td><td>- IN Pointer to SNTP context provided by user. </td></tr>
    <tr><td class="paramname">serverIpAddr</td><td>- IN Server IP address. </td></tr>
    <tr><td class="paramname">serverTimeout</td><td>- IN time in seconds to wait for server response. </td></tr>
    <tr><td class="paramname">cb</td><td>- IN Function that will be called to notify the result. </td></tr>
    <tr><td class="paramname">cbCtx</td><td>- IN User context that will be passed back in callback. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">GSN_FAILURE</td><td>Operation failed. </td></tr>
    <tr><td class="paramname">GSN_OPERATION_IN_PROGRESS</td><td>Operation in progress. Callback function will be called to indicate the result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If this function returns anything other than GSN_OPERATION_IN_PROGRESS, then the API execution is complete and callback will not be called. If GSN_OPERATION_IN_PROGRESS is returned, then the callback will be called after the operation is complete to indicate the final result. </dd>
<dd>
The callback function is called after the operation is complete or upon timeout (20sec). If the callback status is GSN_FAILURE, then it indicates timeout. If the callback status is GSN_SUCCESS, then it indicates the server response was received and the time difference can be obtained by calling GsnSntp_TimeDiffGet. </dd></dl>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Tue May 13 2014 11:12:10 for GEPS 5.1.0 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
